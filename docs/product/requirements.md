# ENEX Viewer 要件定義

## 1. 目的
Evernote の ENEX ファイルをローカル環境で読み込み、ノート内容を安全に閲覧できる Web アプリを提供する。

## 2. 想定ユーザー
- Evernote から移行検討中の個人ユーザー
- ENEX の中身を迅速に確認したい開発者/運用担当

## 3. スコープ
### 3.1 MVP に含める
- ENEX ファイルのアップロード
- ENEX XML の解析
- ノート一覧表示（タイトル、日時、タグ、抜粋）
- ノート詳細表示（本文、メタデータ、添付情報）
- タイトル/本文/タグの検索
- 本文の安全な描画（XSS 対策）
- 解析失敗時のユーザー向けエラー表示

### 3.2 MVP では含めない
- Evernote API 連携
- ノート編集/再エクスポート
- 認証/ユーザー管理
- マルチユーザー前提のサーバー運用

## 4. 機能要件
- FR-001: ユーザーは `.enex` ファイルをアップロードできる。
- FR-002: システムは ENEX からノートを抽出し、一覧表示できる。
- FR-003: ユーザーはノートを選択して詳細を閲覧できる。
- FR-004: ユーザーはキーワードでノートを絞り込める。
- FR-005: システムは解析失敗時に原因を提示できる。
- FR-006: 添付リソースのメタ情報を表示できる。

## 5. 非機能要件
- NFR-001: 中〜大規模 ENEX でも主要 UI 操作が実用的な応答時間を維持する。
- NFR-002: 本文描画時にスクリプト実行を許可しない。
- NFR-003: API はローカル開発時に `3001` 番ポートで動作する。
- NFR-004: Web は主要なモバイル/デスクトップ幅で操作可能である。
- NFR-005: 主要処理に対して unit/integration テストを用意する。

## 6. 制約
- 技術スタックは TypeScript を前提とする。
- モノレポ構成（`apps/api`, `apps/web`）を維持する。
- ファイルアップロード処理はメモリ使用量を意識し、将来の改善余地を残す。

## 7. MVP 受け入れ条件
- 代表 ENEX サンプル（小/中/壊れたデータ）で期待挙動を確認できる。
- 主要ユースケース（アップロード、一覧、検索、詳細、エラー表示）が成立する。
- 起動/仕様/テスト手順が README と docs に反映されている。
