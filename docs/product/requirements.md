# ENEX Viewer 要件定義

## 1. 目的
Evernote の ENEX ファイルをローカルで読み込み、ノート内容を安全に閲覧できる Web アプリを提供する。

## 2. 想定ユーザー
- Evernote から移行検討中の個人ユーザー
- ENEX の中身を素早く確認したい開発者・運用担当

## 3. スコープ
### 3.1 MVP に含める
- ENEX ファイルのアップロード
- ENEX の XML 解析
- ノート一覧表示（タイトル、作成日、更新日、タグ）
- ノート詳細表示（本文、メタデータ、添付ファイル情報）
- 本文検索（タイトル/本文/タグの部分一致）
- ノート本文の安全な描画（XSS 対策）
- 解析エラーの表示

### 3.2 MVP では含めない
- Evernote API 直接連携
- ノート編集・再エクスポート
- 認証/ユーザー管理
- 複数ユーザー同時利用を前提としたサーバー運用

## 4. 機能要件
- FR-001: ユーザーは `.enex` ファイルをアップロードできる。
- FR-002: システムは ENEX からノート情報を抽出し、一覧表示できる。
- FR-003: ユーザーはノートを選択して詳細表示できる。
- FR-004: ユーザーはキーワードでノートを絞り込める。
- FR-005: システムは解析失敗時に原因をユーザーへ提示する。
- FR-006: 添付リソース（画像/ファイル）のメタ情報を表示できる。

## 5. 非機能要件
- NFR-001: 10,000 ノート規模でも UI 操作時の応答が体感 1 秒以内（検索・一覧操作）。
- NFR-002: 本文描画時にスクリプト実行を許可しない。
- NFR-003: API はローカル開発時に 3001 番ポートで動作する。
- NFR-004: Web はモバイル/デスクトップの主要画面幅で崩れない。
- NFR-005: 主要処理に対して自動テスト（unit/integration）を用意する。

## 6. 制約
- 技術スタックは TypeScript を前提とする。
- 既存モノレポ構成（`apps/api`, `apps/web`）を維持する。
- ファイルアップロード処理はメモリ使用量を意識し、将来的なストリーミング対応を見据える。

## 7. 受け入れ条件（MVP）
- 代表的な ENEX サンプル 3 種（小/中/大）で読み込みと閲覧が可能。
- エラーケース（壊れた XML、巨大ファイル）で適切な失敗メッセージを表示。
- README と docs に起動方法と仕様が反映されている。
