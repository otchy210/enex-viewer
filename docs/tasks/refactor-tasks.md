# リファクタタスク（独立カテゴリ）

## 1. 目的
機能実装とは分離して、重複ロジックの共通化・厳密化を安全に進める。

## 2. タスク一覧

| ID | 種別 | タスク | 依存 | 受け入れ条件 |
|---|---|---|---|---|
| T-019 | Refactor | API のクエリ/パラメータ解析ロジック共通化（厳密バリデーション） | T-004, T-005 | 共通関数化後も既存挙動とテストが維持される |

## 3. T-019 の範囲
- 対象: API controller の入力解析ロジック（query / params）
- 目的: 重複の削減とバリデーション方針の統一
- 方針:
  - 配列クエリの扱いを明示（黙って丸めない）
  - 数値変換は厳密な整数判定にする（`10abc` を許容しない）
  - 既存の HTTP ステータスとエラーメッセージを維持する

## 4. 完了時チェック
- [ ] `npm run typecheck -w apps/api` が通る
- [ ] `npm run test:api` が通る
- [ ] 既存 endpoint の外部仕様（OpenAPI/レスポンス挙動）を壊していない
- [ ] 対象ワークパッケージのチェックボックス更新済み
